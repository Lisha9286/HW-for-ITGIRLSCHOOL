<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <title>Document</title>
    <link rel="stylesheet" href="style_comment.css">
</head>

<body>
    <div class="wall">
    </div><br />
    <input type="text" class="input_name" placeholder="Введите ник"><br />
    <textarea class="text" placeholder="Введите сообщение"></textarea><br />
    <input type="url" class="input_img"
        placeholder="Вставьте сюда ссылку на картинку из интернета для аватарки"><br /><br />
    <button class="btnSend btn btn-primary">Send</button>

    <script>
        document.addEventListener("DOMContentLoaded", function (event) {
            let name = localStorage.getItem('name')
            if (name != null) {
                document.querySelector('.input_name').value = name;
            }

            let image = localStorage.getItem('image')
            if (image != null) {
                document.querySelector('.input_img').value = image;
            }
        });


        let btnSend = document.querySelector('.btnSend')
        btnSend.addEventListener('click', () => {
            let comment = document.querySelector('.text').value;
            let commentChecked = comment.replace(/xxx|viagra/ig, "***")
            let userPic = document.querySelector('.input_img').value
            let userName = document.querySelector('.input_name').value

            document.querySelector('.wall').innerHTML +=
                `<div class="wall__comment"><img src="${userPic}" class="wall__userPic" alt="img"> <div class="userComment"><span class="wall__userName">${userName}:</span> ${commentChecked}</div></div> `;

            if (localStorage.getItem('name') == null) {
                localStorage.setItem('name', userName);
            }

            if (localStorage.getItem('image') == null) {
                localStorage.setItem('image', userPic);
            }

            const cleanTextarea = document.querySelector('.text');
            cleanTextarea.value = '';
        })
    </script>
</body>

</html>